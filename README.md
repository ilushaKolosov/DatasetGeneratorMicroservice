# Микросервис сбора данных для криптотрейдинга

Микросервис для сбора и подготовки данных с криптовалютных бирж для дальнейшего обучения ML-моделей.

## Возможности

- Сбор исторических OHLCV данных с поддержкой различных таймфреймов
- Получение данных биржевого стакана (orderbook)
- Расчет технических индикаторов (RSI, MACD, Bollinger Bands и др.)
- Сохранение данных в CSV для последующего обучения моделей
- Настраиваемый интервал сбора данных
- Поддержка различных криптовалютных пар

## Технический стек

- Python 3.10+
- ccxt для работы с API криптобирж
- pandas для обработки данных
- ta для расчета технических индикаторов
- Docker для контейнеризации
- schedule для планирования задач

## Установка и запуск

### Предварительные требования

- Docker и Docker Compose
- API ключи криптобиржи (если необходимо)

### Настройка

1. Клонируйте репозиторий:
```
git clone <url-репозитория>
cd crypto-data-collector
```

2. Настройте переменные окружения в файле `.env`:
```
# Скопируйте шаблон .env
cp .env.example .env

# Отредактируйте файл .env и добавьте свои API ключи
```

### Запуск с использованием Docker

```bash
# Сборка и запуск контейнера
docker-compose up -d

# Просмотр логов
docker-compose logs -f
```

### Запуск без Docker

```bash
# Установка зависимостей
pip install -r requirements.txt

# Запуск микросервиса
python src/main.py
```

## Настройка параметров

Параметры сбора данных можно настроить в файле `.env`:

- `EXCHANGE` - используемая биржа (по умолчанию: binance)
- `SYMBOLS` - список торговых пар, разделенных запятыми (пример: BTC/USDT,ETH/USDT)
- `TIMEFRAMES` - список временных интервалов (пример: 1h,4h,1d)
- `DATA_COLLECTION_INTERVAL` - частота сбора данных в секундах
- `HISTORY_DAYS` - количество дней для исторических данных

## Структура получаемых данных

Микросервис создает CSV-файл со следующими данными:

- Временные метки и идентификаторы (timestamp, datetime, symbol, timeframe)
- OHLCV данные (open, high, low, close, volume)
- Технические индикаторы (sma_20, sma_50, rsi_14, macd, bb_upper и др.)
- Данные стакана (best_bid_price, best_ask_price, spread)

## Расширение функциональности

Микросервис спроектирован с учетом возможности добавления новых источников данных и индикаторов:

1. Для добавления новых индикаторов отредактируйте файл `src/utils/indicators.py`
2. Для поддержки новых бирж расширьте `src/services/exchange_service.py` 